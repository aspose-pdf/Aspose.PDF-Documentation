<?php

/**
 * This script demonstrates how to use the Aspose.PDF for PHP via Java library to create a PDF document
 * and add a text fragment to it.
 */

// Include the required libraries
require_once ("../../java/Java.inc");
require_once ("../../lib/aspose.pdf.php");

// Import the necessary classes from the Aspose.PDF for PHP via Java library
use com\aspose\pdf\Document;
use com\aspose\pdf\TextFragment;
use com\aspose\pdf\License;

// Set the path to the Aspose.PDF license file
$license = "C:\Keys\Aspose.PDF.PHPviaJava.lic";

// Create a new License object and set the license file
$licenceObject = new License();
$licenceObject->setLicense($license);

// Set the path to the directory where the sample files are located
$dataDir = getcwd() . DIRECTORY_SEPARATOR . "samples";

// Set the path to the output file
$outputFile = $dataDir . DIRECTORY_SEPARATOR . "results" . DIRECTORY_SEPARATOR . 'hello-world.pdf';

// Set the response header to indicate that the response will be in JSON format
header('Content-Type: application/json; charset=utf-8');

try {
    // Create a new Document object
    $document = new Document();

    // Add a new page to the document
    $page = $document->getPages()->add();

    // Create a new TextFragment object with the text "Hello World!"
    $textFragment = new TextFragment("Hello World!");

    // Add the TextFragment to the page
    $page->getParagraphs()->add($textFragment);

    // Save the document to the output file
    $document->save($outputFile);
} catch (Exception $ex) {
    // If an exception occurs, encode the exception message as JSON and echo it
    echo json_encode($ex);
}

// Create a response message indicating the success of the operation and the size of the output file
$responseData = "Document has been created successfully. Filesize: " . filesize($outputFile);

// Encode the response data as JSON and echo it
echo json_encode($responseData);